<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>FizzBuzz</title>
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <style>
        body{margin:0;}
        header{
            width:100%;
            margin-top: 18vh;
            font-size: 3em;
            margin-bottom: 4vw;
            text-align: center;
        }
        h1, h2 {
            font-family: sans-serif;
            text-align: center;
            font-weight: bolder;
            margin:0.1em;
        }
        h1 {font-size:2em;}
        h2 {font-size:1.3em;}
        main {
            gap:12px;
            display:flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            margin-left:20vw;
            margin-right:20vw;
        }
        form {
            padding:0;
            width:20%;
        }
        input, button {
            padding:2px;
            margin:0 0 0 -2px;
            display:block;
            width:97%;
            font-family:sans-serif;
        }
        button {width:20%;}
        hr {
            height:0.1em;
            background-color: black;
            width:100%;
        }
        #output-container {
            display:block;
            width:97%;
            border:0.05em solid black;
            height:40vh;
            font-family: monospace;
            overflow-y:auto;
            cursor:text;
            overflow-x: hidden;
        }
        #output {
            display:block;
            width:100%;
            margin:0.6em;
            height:90%;
        }
        p {font-family:sans-serif;}
        span {font-family: monospace;text-decoration: underline;}
        p, span {font-size:1.1em;margin:0;}
    </style>
    <script>
        function start() {
            document.getElementById("output").innerHTML = 'Calculating...';
            document.getElementById("status").innerHTML = 'Preparing';
            setTimeout(() => {checkNumber();}, 50);
            console.clear();
        }
        function checkNumber() {
            var amount = document.getElementsByName("amount")[0].value;
            console.log(amount);
            if (amount < 0) {
                document.getElementById("status").innerHTML = 'Error; Now Awaiting Input';
                alert("Please provide an integer greater than 0 and less than 2501");
                document.getElementsByName("amount")[0].value = 0;
                document.getElementById("output").innerHTML = '';
            }
            if (Math.ceil(amount) != amount) {
                document.getElementById("status").innerHTML = 'Error; Now Awaiting Input';
                alert("Please provide an integer greater than 0 and less than 2501");
                document.getElementsByName("amount")[0].value = 0;
                document.getElementById("output").innerHTML = '';
            }
            if (amount > 2500) {
                document.getElementById("status").innerHTML = 'Error; Now Awaiting Input';
                alert("Please provide an integer greater than 0 and less than 2501");
                document.getElementsByName("amount")[0].value = 0;
                document.getElementById("output").innerHTML = '';
            }
            if (amount != 0) {
                fizzBuzz(amount);
            } else {
                document.getElementById("status").innerHTML = 'Error; Now Awaiting Input';
                alert("Please provide an integer greater than 0 and less than 2501");
                document.getElementsByName("amount")[0].value = 0;
                document.getElementById("output").innerHTML = '';
            }
        }
        function fizzBuzz(amount) {
            document.getElementById("status").innerHTML = 'Beginning calculations';
            document.getElementById("output").innerHTML = '';
            var numbers = []
            var output = null;
            var text = '';
            for (let i = 0; i <= amount; i++) {
                setTimeout(() => {
                    document.getElementById("status").innerHTML = 'Calculating: ' + i + ' of ' + amount;
                    // Detect Fizzes
                    if ( (i / 3) == Math.ceil(i / 3)) {
                        text += 'Fizz';
                    }

                    //Detect Buzzes
                    if ( (i / 5) == Math.ceil(i / 5)) {
                        text += 'Buzz';
                    }

                    //Output
                    if (text != '') {
                        output = i + ' -- ' + text + '!';
                    } else {
                        output = i;
                    }
                        //console.log(i);
                        document.getElementById("output").innerHTML += output + '<br>';

                    output = null;
                    text = '';
                }, 30);
            }
        }
    </script>
</head>
<body>
    <header>
        <h1>FizzBuzz</h1>
    </header>
    <main>
        <h2>Please enter a number:</h2>
        <form>
            <input type="number" name="amount" placeholder="Enter a number" value="100">
        </form>
        <button onclick="start()">Calculate Fizzes &amp; Buzzes</button>
        <hr>
        <p><b>Status: </b><span id="status">Awaiting Input</span></p>
        <div id="output-container">
            <div id="output">
                
            </div>
        </div>
    </main>
    <!-- <script>
        setInterval(() => {
            document.getElementById("output").innerText = '|';
            setTimeout(() => {document.getElementById("output").innerText = '';}, 1000);
        }, 2000)
    </script> -->
</body>
</html>